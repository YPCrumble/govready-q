{% extends "project-base.html" %}
{% load humanize %}
{% load static %}
{% load q %}

{% block title %}
Welcome to GovReady Q - {{org.name}}
{% endblock %}

{% block head %}
<style>
.project-image {
  width: 20px;
  float: left;
  margin: 4px 0 5px 8px;
}

.project-text {
}

.project-text h4 {
  margin: 0;
  font-weight: bold;
  font-size: inherit;
}

.project-text > * {
  margin: .5em 0 0 0;
  font-size: 13px;
}

</style>
{% endblock %}

Remove contextbar from top of page
{% block contextbar %}{% endblock %}

% block body-wide %
{% block body %}

<div style="margin-top: 30px">

<div class="container">

<div style="float: right; margin: 0 0.5em 0em 5em;">
  <a id="new-project" href="/store?portfolio={{portfolio.id}}" class="btn btn-success">Start a project</a>
  {% if can_invite_to_portfolio %}
  <a href="#" onclick="invite_user_into_portfolio(); return false;" class="btn btn-success"><i class="glyphicon glyphicon-plus"></i> Grant access to member</a>
  {% endif %}
</div>

<h2 class="">{{ portfolio.title }}</h2>
<small style="color: #888;">Portfolio ID: {{ portfolio.id }}</small>

{% if projects|length > 0 %}
<p>This portfolio has {{ projects|length }} project{{ projects|pluralize }}</p>
{% endif %}

<p> <b>Users with access to this portfolio:</b>
  <span> {{ users_with_perms|join:", " }} </span>
</p>

<div class="container">
{% for project in projects %}
<div class="row" style="border-top: 1px solid #aaa;padding: 8px 0px 8px 0px;">
  <div class="col-md-6">
    {% if project.root_task.get_app_icon_url %}
      <a href="{{project.get_absolute_url}}" class="project-image">
        <img src="{{project.root_task.get_app_icon_url}}" class="img-responsive">
      </a>
    {% else %}
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    {% endif %}
    &nbsp;&nbsp;&nbsp;
    <a href="{{project.get_absolute_url}}" style="color: black;">{{project.title}}</a>
  </div>

  <div class="col-md-3">&nbsp;</div>

  <div class="col-md-1">
    <small style="color: #888;">(ID: {{project.id}})</small>
  </div>

  <div class="col-md-2">
      <small style="color: #888;">
      Updated {{project.root_task.updated|naturaltime}}
    </small>
  </div>

</div>

{% endfor %}

{% if projects|length < 2 %}
<div class="container">
  <div class="row" style="margin-top: 60px;">
    <div class="col-md-2"></div>
    <div class="col-md-5">
      <h2>A portfolio is a collection of projects.</h2>

      <p>Think of a portfolio like a folder for your projects.</p>

      <p>The owner of the portfolio can manage portfolio members.</p>
    </div>
    <div class="col-md-3">
        <div class="glyphicon glyphicon-folder-open" style="font-size: 8em; color: rgb(160, 210, 160);"></div>
    </div>
    <div class="col-md-2"></div>
  </div>
</div>
{% endif %}

    {{ block.super }} 
{% endblock %}


{% block scripts %}
<script>
var project_invitation_info = {{send_invitation|json}};
function invite_user_into_portfolio() {
  var info = project_invitation_info;
  show_invite_modal(
    'Invite To A Portfolio (' + info.portfolio_title + ')',
    'Give a colleague access to this portfolio.',
    info,
    'You have been granted access to the portfolio ' + info.portfolio_title + '.',
    {
      portfolio: info.portfolio_id,
    },
    function() { window.location.reload() }
  );

  return false;
}

</script>
{% endblock %}